<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Metals.Dev Spot Prices</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#f6f8fb; margin:0; padding:24px; }
    h1 { text-align:center; margin-bottom:20px; }
    .grid { display:flex; flex-wrap:wrap; gap:16px; justify-content:center; }
    .card { background:#fff; border:1px solid #e5e7eb; border-radius:14px; padding:18px; width:230px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,.06); }
    .t { color:#64748b; font-weight:700; font-size:12px; letter-spacing:.35px; text-transform:uppercase; }
    .p { font-size:32px; font-weight:800; margin:8px 0 2px; }
    .note { color:#64748b; font-size:12px; }
    .foot { text-align:center; margin-top:16px; color:#64748b; }
    button { display:block; margin:14px auto 0; padding:8px 14px; border:1px solid #e5e7eb; border-radius:8px; background:#fff; cursor:pointer; }
    button:hover { background:#f3f4f6; }
  </style>
</head>
<body>
  <h1>Live Precious Metals (USD / toz)</h1>

  <div class="grid">
    <div class="card"><div class="t">Gold (XAU)</div><div id="gold" class="p">—</div><div class="note">spot</div></div>
    <div class="card"><div class="t">Silver (XAG)</div><div id="silver" class="p">—</div><div class="note">spot</div></div>
    <div class="card"><div class="t">Platinum (XPT)</div><div id="platinum" class="p">—</div><div class="note">spot</div></div>
    <div class="card"><div class="t">Palladium (XPD)</div><div id="palladium" class="p">—</div><div class="note">spot</div></div>
  </div>

  <div class="foot" id="ts">Last updated: —</div>
  <button id="refresh">Refresh Now</button>

  <script>
    const API_KEY = "YOUR_API_KEY";
    const URL = `https://api.metals.dev/v1/latest?api_key=${encodeURIComponent(API_KEY)}&currency=USD&unit=toz`;

    const fmt = n => n?.toLocaleString(undefined,{style:"currency",currency:"USD",maximumFractionDigits:3}) ?? "—";

    async function load() {
      try {
        const res = await fetch(URL, {cache: "no-store"});
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        const m = data.metals || {};
        document.getElementById("gold").textContent = fmt(m.gold);
        document.getElementById("silver").textContent = fmt(m.silver);
        document.getElementById("platinum").textContent = fmt(m.platinum);
        document.getElementById("palladium").textContent = fmt(m.palladium);
        const ts = data.timestamp ? new Date(data.timestamp) : new Date();
        document.getElementById("ts").textContent = `API timestamp: ${ts.toLocaleString()} • Local: ${new Date().toLocaleTimeString()}`;
      } catch (e) {
        document.getElementById("ts").textContent = `Error: ${e.message}`;
        console.error(e);
      }
    }
    document.getElementById("refresh").addEventListener("click", load);
    load(); setInterval(load, 60000);
  </script>
</body>
</html>
